<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="cache-control" content="max-age=0">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="cache-control" content="no-store">
    <meta http-equiv="pragma" content="no-cache" />

    <title>Decode Secret</title>

    <script type="text/javascript" src="lib/secrets.min.js" integrity="sha512-RMv4Jd0YM0jkIYAay9+uQp7j8TNEd8wxurxWfvunbQPnC5SVOh+QVk6Xkip3i0Ibo/r0NZGJ+GGJ4MKTLpEZSQ=="></script>

    <script type="text/javascript" src="lib/jquery-3.3.1.min.js" integrity="sha512-+NqPlbbtM1QqiK8ZAo4Yrj2c4lNQoGv8P79DPtKzj++l5jnN39rHA/xsqn8zE9l0uSoxaCdrOgFs6yjyfbBxSg=="></script>

    <style type="text/css">
        .shares_input {
            width:90%;
            text-align:center;
        }
    </style>
</head>
<body>

<h2>Le Secret :</h2>
<em>Le secret reconstitué apparaitra ci-dessous au fur et à mesure que vous rentrerez les parts.<br>
S’il est inintelligible à la fin de l’opération, c’est probablement qu’une erreur est survenue, que les parts fournies sont insuffisantes ou que la saisie n'est pas terminée.</em>
<br><br>
<div id="secret_result" style="font-weight:bold;font-size:200%;color:blue;background-color:yellow;text-align:center;">??????</div>

<h2>Parts :</h2>
<em>Renseigner le nombre de parts minimal, dans n'importe quel ordre. Le secret s'affichera ci-dessus.</em>

<h3>Part N°1</h3>
<input type="text" autocomplete="off" class="shares_input" id="share1">
<h3>Part N°2</h3>
<input type="text" autocomplete="off" class="shares_input" id="share2">
<h3>Part N°3</h3>
<input type="text" autocomplete="off" class="shares_input" id="share3">
<h3>Part N°4</h3>
<input type="text" autocomplete="off" class="shares_input" id="share4">
<h3>Part N°5</h3>
<input type="text" autocomplete="off" class="shares_input" id="share5">
<h3>Part N°6</h3>
<input type="text" autocomplete="off" class="shares_input" id="share6">
<h3>Part N°7</h3>
<input type="text" autocomplete="off" class="shares_input" id="share7">
<h3>Part N°8</h3>
<input type="text" autocomplete="off" class="shares_input" id="share8">
<h3>Part N°9</h3>
<input type="text" autocomplete="off" class="shares_input" id="share9">
<h3>Part N°10</h3>
<input type="text" autocomplete="off" class="shares_input" id="share10">


<script type="text/javascript">
    $(".shares_input").on("keyup change",function(){
        shares = new Array ();

        $(".shares_input").each(function() {
            var shareInputContent = $(this).val();

            if (shareInputContent.length !== 0) {
                shares.push(shareInputContent);
            }
        });

        if (shares.length >= 4) {
            $("#secret_result").html(secrets.hex2str( secrets.combine(shares) ));
        }  
    });


</script>

</body>
</html>